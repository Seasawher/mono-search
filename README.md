# mono-search

## 概要

Unixコマンドの `find` と `grep` を組み合わせたようなCLIファイル検索ツールです．複数ディレクトリを対象に，正規表現に合致する行を有するファイルまたは特定のファイル名を持つファイルを検索できます．

`find` と `grep` をパイプでつなげるなどして複雑なシェルスクリプトを書くのに比べて，ずっと直感的にわかりやすく操作することができます．

## 要件

### 機能

* あるディレクトリの中の，特定の条件を満たすファイルを検索することができる
  * 検索にヒットしたファイルがどのファイルか，パスも含めて出す
  * どのファイルの何行目がヒットしたかも示す
  * ヒットしたファイルの数をサマリとして示す

* 検索対象のファイルを設定する条件は，以下から自由に複数選択可能
  * 与えられた正規表現にマッチする行を含む
  * 与えられた文字列にファイル名が一致する
  * ファイル名として，正規表現も指定できる

* 探す対象となるディレクトリは複数指定することができる
  * 探す対象となるディレクトリの階層は問わない
  * 探す対象となるディレクトリは，CLIツールがインストールされたカレントディレクトリおよびその配下に限り，親ディレクトリは探索できない

### UI

* 探す対象となるディレクトリにいくつファイルがあるか数えて，検索作業の進捗をリアルタイムに出す

### そのほか

* 5万ファイル程度のディレクトリを検索しても，3秒以内に処理が終わる
* 単独で使うことができて，依存ツールのインストールが不要
* 完全にローカルに動作し，ネットにアクセスしない
* ファイルの読み込みのみを行い，変更・削除をしない

## 参考にしたもの

* [Command Line Applications in Rust](https://rust-cli.github.io/book/) Rust でCLIツールを作ることに関する本.
* [fd-find](https://github.com/sharkdp/fd) Rustによる高速な `find` の再実装．ライブラリとしてCLIツールの内部で使えればよかったが，それはできない．
* [ignore](https://crates.io/crates/ignore) fd-findの内部で使用されているファイル検索クレート．
* [clap](https://crates.io/crates/clap) コマンドラインツールを作るためのクレート．
* [tempdir](https://crates.io/crates/tempdir) 一時ファイルを作成することができる，テストを楽にしてくれそうなクレート.
